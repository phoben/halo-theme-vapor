<article class="fade-before" th:fragment="notes-card(post)">
  <a
    class="notes-card group relative z-[1] flex w-full transform-cpu rounded-2xl border bg-white p-4 transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg md:p-6"
    style="background: var(--vapor--color-back-white); border: var(--vapor--border)"
    th:href="@{${post.status.permalink}}"
    th:title="${post.spec.title}"
  >
    <!-- 左侧内容区域 -->
    <div class="flex min-w-0 flex-1 flex-col justify-between pr-4">
      <!-- 标题 -->
      <h2
        class="mb-2 line-clamp-2 text-lg font-bold group-hover:transition-colors md:text-xl"
        style="color: var(--vapor--color-font-head)"
        th:text="${post.spec.title}"
      ></h2>

      <!-- 摘要 -->
      <p
        class="mb-3 line-clamp-2 text-sm leading-relaxed opacity-70 md:text-base"
        style="color: hsl(var(--vapor--color-font))"
        th:if="${post.status.excerpt}"
        th:text="${post.status.excerpt}"
      ></p>

      <!-- 底部信息 -->
      <div
        class="flex items-center justify-between whitespace-nowrap text-xs opacity-60 md:text-sm"
        style="color: hsl(var(--vapor--color-font))"
      >
        <div class="flex flex-shrink-0 items-center space-x-3 md:space-x-6">
          <!-- 发布时间 -->
          <span class="inline-flex flex-shrink-0 items-center space-x-1.5">
            <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M8 2V4.12777M8 6V4.12777M16 2V4.12777M16 6V4.12777M20.9597 10C21 10.7878 21 11.7554 21 13C21 15.7956 21 17.1935 20.5433 18.2961C19.9343 19.7663 18.7663 20.9343 17.2961 21.5433C16.1935 22 14.7956 22 12 22C9.20435 22 7.80653 22 6.7039 21.5433C5.23373 20.9343 4.06569 19.7663 3.45672 18.2961C3 17.1935 3 15.7956 3 13C3 11.7554 3 10.7878 3.0403 10M20.9597 10C20.9095 9.01824 20.7967 8.31564 20.5433 7.7039C19.9343 6.23373 18.7663 5.06569 17.2961 4.45672C16.9146 4.29871 16.4978 4.19536 16 4.12777M20.9597 10L3.0403 10M3.0403 10C3.09052 9.01824 3.20333 8.31564 3.45672 7.7039C4.06569 6.23373 5.23373 5.06569 6.7039 4.45672C7.08538 4.29871 7.50219 4.19536 8 4.12777M8 4.12777C8.94106 4 10.1716 4 12 4C13.8284 4 15.0589 4 16 4.12777"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </svg>
            <span th:text="${#dates.format(post.spec.publishTime,'yyyy/MM/dd')}"></span>
          </span>

          <!-- 分类 -->
          <span
            th:if="${not #lists.isEmpty(post.categories)}"
            class="inline-flex flex-shrink-0 items-center space-x-1.5"
          >
            <th:block th:if="${#lists.size(post.categories)} gt 0">
              <i class="iconfont icon-cate text-sm"></i>
              <span
                class="max-w-20 truncate"
                th:title="${post.categories[0].spec.displayName}"
                th:text="${post.categories[0].spec.displayName}"
              ></span>
            </th:block>
          </span>
        </div>

        <!-- 统计信息 -->
        <div class="flex flex-shrink-0 items-center space-x-3 md:space-x-4">
          <span class="inline-flex items-center space-x-1.5">
            <i class="iconfont icon-views1 text-sm"></i>
            <span>[[${post.stats.visit}]]</span>
          </span>
          <span class="inline-flex items-center space-x-1.5">
            <i class="iconfont icon-friends text-sm"></i>
            <span>[[${post.stats.comment}]]</span>
          </span>
        </div>
      </div>
    </div>

    <!-- 右侧封面图 -->
    <div
      class="md:h-30 h-24 w-32 flex-shrink-0 overflow-hidden rounded-xl md:w-40"
      style="background: var(--vapor--color-back-font)"
      th:if="${!#strings.isEmpty(post.spec.cover)}"
    >
      <img
        alt=""
        loading="lazy"
        decoding="async"
        class="notes-card-cover h-full w-full object-cover transition-transform group-hover:scale-105"
        th:src="${post.spec.cover}"
        th:srcset="|${thumbnail.gen(post.spec.cover, 's')} 400w,
                  ${thumbnail.gen(post.spec.cover, 'm')} 800w|"
        sizes="(max-width: 768px) 128px, 160px"
        th:alt="${post.spec.title}"
      />
    </div>
  </a>
</article>
