<article class="fade-before" th:fragment="post-card(post)">
  <a
    class="post-card group relative z-[1] flex h-full w-full transform-cpu flex-col rounded-3xl bg-transparent ring-2 ring-[--post-image-bg] transition-transform hover:-translate-y-1"
    th:href="@{${post.status.permalink}}"
    th:title="${post.spec.title}"
  >
    <div class="relative aspect-[240/135] w-full">
      <img
        alt=""
        loading="lazy"
        decoding="async"
        data-nimg="fill"
        class="post-card-cover load rounded-t-3xl object-cover"
        th:src="${post.spec.cover}"
        th:srcset="|${thumbnail.gen(post.spec.cover, 's')} 400w,
                  ${thumbnail.gen(post.spec.cover, 'm')} 800w,
                  ${thumbnail.gen(post.spec.cover, 'l')} 1200w,
                  ${thumbnail.gen(post.spec.cover, 'xl')} 1600w|"
        sizes="(max-width: 1600px) 100vw, 1600px"
        th:alt="${post.spec.title}"
        style="position: absolute; height: 100%; width: 100%; inset: 0px; color: transparent"
      />
    </div>
    <div
      class="relative flex w-full flex-1 shrink-0 flex-col justify-between gap-0.5 rounded-b-[calc(1.5rem+1px)] bg-cover bg-bottom bg-no-repeat p-4 text-white bg-blend-overlay [background-image:var(--post-image)] before:pointer-events-none before:absolute before:inset-0 before:z-10 before:select-none before:rounded-b-[calc(1.5rem-1px)] before:bg-[--post-image-bg] before:opacity-70 before:transition-opacity after:pointer-events-none after:absolute after:inset-0 after:z-10 after:select-none after:rounded-b-[calc(1.5rem-1px)] after:bg-gradient-to-b after:from-transparent after:to-[--post-image-bg] after:backdrop-blur after:transition-opacity group-hover:before:opacity-30 md:p-5"
    >
      <h2
        class="z-20 text-base font-bold tracking-tight opacity-70 transition-opacity group-hover:opacity-100 md:text-xl"
        th:text="${post.spec.title}"
      ></h2>
      <span
        class="relative z-20 mt-auto flex items-center justify-between opacity-50 transition-opacity group-hover:opacity-80"
      >
        <span class="inline-flex items-center space-x-3">
          <span class="inline-flex items-center space-x-1 text-[12px] md:text-sm">
            <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M8 2V4.12777M8 6V4.12777M16 2V4.12777M16 6V4.12777M20.9597 10C21 10.7878 21 11.7554 21 13C21 15.7956 21 17.1935 20.5433 18.2961C19.9343 19.7663 18.7663 20.9343 17.2961 21.5433C16.1935 22 14.7956 22 12 22C9.20435 22 7.80653 22 6.7039 21.5433C5.23373 20.9343 4.06569 19.7663 3.45672 18.2961C3 17.1935 3 15.7956 3 13C3 11.7554 3 10.7878 3.0403 10M20.9597 10C20.9095 9.01824 20.7967 8.31564 20.5433 7.7039C19.9343 6.23373 18.7663 5.06569 17.2961 4.45672C16.9146 4.29871 16.4978 4.19536 16 4.12777M20.9597 10L3.0403 10M3.0403 10C3.09052 9.01824 3.20333 8.31564 3.45672 7.7039C4.06569 6.23373 5.23373 5.06569 6.7039 4.45672C7.08538 4.29871 7.50219 4.19536 8 4.12777M8 4.12777C8.94106 4 10.1716 4 12 4C13.8284 4 15.0589 4 16 4.12777"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </svg>
            <span th:text="${#dates.format(post.spec.publishTime,'yyyy/MM/dd')}"></span>
          </span>
          <span
            th:if="${not #lists.isEmpty(post.categories)} or ${not #lists.isEmpty(post.tags)}"
            class="inline-flex items-center space-x-1 text-[12px] md:text-sm"
          >
            <th:block th:if="${#lists.size(post.categories)} gt 0">
              <i class="iconfont icon-cate text-sm"></i>
              <span
                th:title="${post.categories[0].spec.displayName}"
                th:text="${post.categories[0].spec.displayName}"
              ></span>
            </th:block>
          </span>
        </span>
        <span class="inline-flex items-center space-x-3 text-[12px] text-[--post-image-fg] md:text-xs">
          <span class="inline-flex items-center space-x-1">
            <i class="iconfont icon-views1 text-sm"></i>
            <span>[[${post.stats.visit}]]</span>
          </span>
          <span class="inline-flex items-center space-x-1">
            <i class="iconfont icon-friends text-sm"></i>
            <span>[[${post.stats.comment}]]次讨论</span>
          </span>
        </span>
      </span>
    </div>
  </a>
</article>
